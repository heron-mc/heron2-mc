var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};$jscomp.initSymbol();$jscomp.initSymbolIterator();b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};$jscomp.initSymbol();$jscomp.initSymbolIterator();a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;$jscomp.initSymbol();$jscomp.initSymbolIterator();a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}Ext.define('Heron.Utils',{singleton:!0,requires:['Ext.window.Toast'],checkOption:function(b,a){a=a===undefined?null:a;if(Ext.isDefined(b)){if(b===null){return a}else {return b}}else {return a}},getClassName:function(b){var a;a=Heron.Utils.getFullClassName(b);if(a.indexOf('.')>=0){return a.afterLast('.')}else {return a}},getFullClassName:function(a){if(Heron.Utils.isSet(a.$className)){return a.$className}else {if(Heron.Utils.isSet(a.constructor)){return a.constructor.name}else {return ''}}},getCallerAlias:function(b){var a='';if(Ext.isString(b)){if(isEmpty(b)){a=''}else {a=' ('+b+')'}}else {if(Heron.Utils.isSet(b)){if(Heron.Utils.isSet(b.alias)){if(Ext.isArray(b.alias)){a=b.alias[0]}else {a=b.alias}a=a.split('.');a=a[a.length-1];a=' ('+a+')'}else {if(Heron.Utils.isSet(b.toString)){a=' ('+b.toString()+')'}}}}return a},getUrlParameter:function(c,b){try{var a;a=new URL(c);return a.searchParams.get(b)}catch(d){console.error('Heron.Utils.getUrlParameter - '+d)}},isEmpty:function(a){if(typeof a==='undefined'){return !0}else {if(a===null){return !0}else {if(typeof a==='string'&&a.length===0){return !0}else {return toString.call(a)==='[object Array]'&&a.length===0}}}},isSet:function(a){if(typeof a==='undefined'){return !1}else {return a!==null}},msgBoxInfo:function(a){Ext.MessageBox.show({title:__('Information'),msg:a,icon:Ext.MessageBox['INFO'],buttons:Ext.MessageBox.OK,maskClickAction:'hide'})},msgBoxError:function(a){Ext.MessageBox.show({title:__('Error'),msg:a,icon:Ext.MessageBox['ERROR'],buttons:Ext.MessageBox.OK,maskClickAction:'hide'})},msgBoxWarning:function(a){Ext.MessageBox.show({title:__('Warning'),msg:a,icon:Ext.MessageBox['WARNING'],buttons:Ext.MessageBox.OK,maskClickAction:'hide'})},msgConfigError:function(b,c){var a;a=Heron.Utils.getCallerAlias(b);this.msgError(__('Configuration error')+a+' - '+c)},msgConfigWarning:function(c,b){var a;a=Heron.Utils.getCallerAlias(c);if(Heron.Utils.isEmpty(a)){this.msgWarning(b)}else {this.msgWarning(__('Configuration warning')+a+' - '+b)}},msgError:function(a){var b;b=Heron.Utils.checkOption(Heron.app.errors.duration,4000);if(Heron.ENABLE_TRACEBACK===!0){consoleError(a+'\n'+Heron.Utils.traceBack())}else {consoleError(a)}Ext.toast({html:a,cls:'hr-error-popup',bodyCls:'hr-error-popup',hideDuration:b,align:'b'})},msgInfo:function(b){var a;a=Heron.Utils.checkOption(Heron.app.warnings.duration,4000);Ext.toast({html:b,cls:'hr-info-popup',bodyCls:'hr-info-popup',hideDuration:a,align:'b'})},msgWarning:function(b){var a;a=Heron.Utils.checkOption(Heron.app.warnings.duration,4000);consoleWarn(b);Ext.toast({html:b,cls:'hr-warning-popup',bodyCls:'hr-warning-popup',hideDuration:a,align:'b'})},parseLayerDefArray:function(b){var d;var a;var f;var e;var c;if(b.length===1){b.push({})}if(b.length!==2){return null}if(typeof b[0]!=='string'){return null}d=b[0];if(!d.startsWith('ol.')){return null}a=b[1];for(c in a){if(a.hasOwnProperty(c)){if(a[c] instanceof Array){e=Heron.Utils.parseLayerDefArray(a[c]);if(e){a[c]=e}}}}try{f=Heron.Utils.stringToClassInstance(d,a)}catch(g){console.log('Heron.Utils.parseLayerDefArray - '+g)}return f},strElementAdd:function(c,b,d){var a;a=c.split(' ');if(b<0||b>a.length-1){return c}try{a[b]=parseInt(a[b])+d;return a.join(' ')}catch(e){return c}},stringToClassInstance:function(f,e){var b;var a;var d;b=f.split('.');a=window||this;for(var c=0,g=b.length;c<g;c++){a=a[b[c]]}if(typeof a!=='function'){throw new Error('Class function not found.')}d=new a(e);return d},traceBack:function(){var d;var a,c;var e=[];var b,f;d=(new Error()).stack;if(!Heron.Utils.isSet(d)){return ''}c=d.split('\n');for(b=3,f=c.length;b<f;b++){a=c[b].trim();a=a.split(' ');if(a.length>=3){a=a[2];if(a.indexOf('/ext-all')>=0){continue}a=a.replace('(','');a=a.replace(')','');e.push('  '+a)}}return 'Traceback:\n'+e.join('\n')}});var checkOption=Heron.Utils.checkOption;var isSet=Heron.Utils.isSet;var isEmpty=Heron.Utils.isEmpty;Number.prototype.format=function(a){a=a===undefined?0:a;var b;if(a<=3){return this.toFixed(a).replace(/\B(?=(\d{3})+(?!\d))/g,',')}else {b=this.toFixed(a).split('.');return b[0].replace(/\B(?=(\d{3})+(?!\d))/g,',')+'.'+b[1]}};Number.prototype.formatNL=function(a){a=a===undefined?0:a;var b;if(a<=3){return this.toFixed(a).replace('.',',').replace(/\B(?=(\d{3})+(?!\d))/g,'.')}else {b=this.toFixed(a).split('.');return b[0].replace(/\B(?=(\d{3})+(?!\d))/g,'.')+','+b[1]}};String.prototype.after=function(b){var a=this.indexOf(b);if(a===-1){return ''}return this.substr(a+b.length)};String.prototype.afterLast=function(b){var a=this.lastIndexOf(b);if(a===-1){return ''}return this.substr(a+b.length)};String.prototype.before=function(b){var a=this.indexOf(b);if(a===-1){return ''}return this.substr(0,a)};String.prototype.format=function(d){var b=[];for(var a=0;a<arguments.length;++a){b[a-0]=arguments[a]}{var c=b;return this.replace(/{(\d+)}/g,function(b,a){return typeof c[a]!=='undefined'?c[a]:b})}};String.prototype.padLeft=function(c,a){a=a===undefined?' ':a;var b=Array(c).join(a);return (b+this).slice(-b.length)};String.prototype.padRight=function(c,a){a=a===undefined?' ':a;var b=Array(c).join(a);return (this+b).substring(0,b.length)};Ext.define('Heron.base.Panel',{extend:'Ext.panel.Panel',requires:['Ext.panel.Panel','Heron.Utils'],className:'',map:null,constructor:function(a){console.log('Heron.base.Panel.constructor');if(isEmpty(this.className)){this.className=Heron.Utils.getClassName(this)}this.callParent([a]);Heron.App.on('afterlayout',this.onAfterLayout,this);this.on('afterrender',this.onAfterRender,this)},checkConfig:function(b){var a;var c;console.log('Heron.base.Panel.checkConfig');if(!isSet(b)){b={}}a=Heron.options.map;if(!isSet(a)){Heron.Utils.msgConfigError(this,__("No 'Heron.options.map' found in the config."));return null}if(isEmpty(this.className)){this.className=Heron.Utils.getClassName(this)}if(!isSet(a[this.className])){Heron.Utils.msgConfigError(this,__("No 'Heron.options.map.{0}' found in the config.").format(this.className));return null}c=Ext.apply({},b,a[this.className]);if(isSet(b.options)){c.options=Ext.apply({},b.options,a)}else {c.options=Ext.apply({},a)}return c},onAfterLayout:function(a){console.log('Heron.base.Panel.onAfterLayout - '+a);this.map=Heron.App.map},onAfterRender:function(a){}});Ext.define('Heron.widgets.HtmlPanel',{extend:'Heron.base.Panel',alias:'widget.hr_HtmlPanel',requires:['Ext.LoadMask','Heron.base.Panel','Heron.Utils'],html:'',htmlTemplate:'',loadMask:null,url:'',constructor:function(a){console.log('Heron.widgets.HtmlPanel.constructor');a=this.checkConfig(a);if(!isSet(a)){return}a.html=checkOption(a.html,this.html);a.url=checkOption(a.url,this.url);this.url=a.url;if(!isEmpty(a.url)){if(!isEmpty(a.html)){if(!a.html.includes('{content}')){Heron.Utils.msgConfigWarning(this,__("No '{content}' tag found in html config."))}this.htmlTemplate=a.html;a.html=''}else {this.htmlTemplate='<div>{content}</div>'}}this.callParent([a])},onAfterRender:function(a){console.log('Heron.widgets.HtmlPanel.onAfterRender '+a);this.superclass.onAfterRender();if(!isEmpty(this.url)){this.loadMask=new Ext.LoadMask({msg:__('Loading...'),target:this});this.loadMask.show();this.loadUrl(this.url)}},loadUrl:function(b){var a=this;Ext.Ajax.request({url:b,success:function(d){var c;c=a.htmlTemplate.replace('{content}',d.responseText);a.setHtml(c);if(a.loadMask){a.loadMask.hide()}},failure:function(c){console.log('Heron.widgets.HtmlPanel.loadUrl response.status: '+c.status);if(a.loadMask){a.loadMask.hide()}if(c.status===404){Heron.Utils.msgConfigWarning(a,__('Could not load the specified url: ')+b)}else {Heron.Utils.msgConfigWarning(a,__('Unknown error when loading the specified url: ')+b)}}})}});Ext.define('Heron.debug.LogMapInfo',{map:null,constructor:function(a){console.log('Heron.debug.LogMapInfo.constructor');if(!isSet(a)){a={}}if(!isSet(a.map)){return}this.map=a.map;this.callParent([a]);this.map.on('moveend',this.onMoveEnd,this)},onMoveEnd:function(){var a='';a+=__('Current zoomlevel: ')+this.map.getView().getZoom();a+='   ';a+=__('Current resolution: ')+this.map.getView().getResolution();console.log(a)}});Ext.define('Heron.widgets.ToolButton',{extend:'Ext.button.Button',alias:'widget.hr_ToolButton',control:null,map:null,constructor:function(a){if(!isSet(a)){a={}}if(isSet(a.control)){this.control=a.control;this.control.setActive(!1)}this.callParent([a]);if(isSet(a.toggleGroup)){this.on('toggle',this.onToggle,this);if(isSet(a.pressed)){if(a.pressed===!0){this.fireEvent('toggle',this,!0)}}}},onToggle:function(b,a){console.log('Heron.widgets.ToolButton.onToggle '+b+' '+a);if(isSet(this.interaction)){if(a){if(!this.interaction.getActive()){this.interaction.setActive(!0)}}else {if(this.interaction.getActive()){this.interaction.setActive(!1)}}}else {if(isSet(this.control)){if(a){if(!this.control.getActive()){this.control.setActive(!0)}}else {if(this.control.getActive()){this.control.setActive(!1)}}}}}});Ext.define('Heron.base.Control',{requires:['Heron.Utils'],className:'',component:null,isActive:!1,map:null,constructor:function(a){console.log('Heron.base.Control.constructor');if(isEmpty(this.className)){this.className=Heron.Utils.getClassName(this)}this.callParent([a])},bind:function(b,a){a=a===undefined?!0:a;this.component=b;if(a){this.updateComponent()}},checkConfig:function(a,b){b=b===undefined?!1:b;var c;console.log('Heron.base.Control.checkConfig');if(!isSet(a)){a={}}if(!isSet(a.options)){Heron.Utils.msgConfigError(this,__("No 'options' found in the config."));return null}if(b){if(!isSet(a.map)){Heron.Utils.msgConfigError(this,__("No '{0}' found in the config.").format('map'));return null}}if(isEmpty(this.className)){this.className=Heron.Utils.getClassName(this)}if(isSet(a.options[this.className])){c=Ext.apply({},a,a.options[this.className])}else {c=Ext.apply({},a)}if(b){this.map=a.map}return c},format:function(a){return a},getActive:function(){return this.isActive},setActive:function(a){console.log('Heron.base.Control.setActive '+a);if(a===!0&&this.isActive){return}if(a===!1&&!this.isActive){return}if(a===!0){this.setEventHandlers(!0)}else {this.setEventHandlers(!1)}this.isActive=a},setEventHandlers:function(a){},updateComponent:function(){}});Ext.define('Heron.base.MapCoordinate',{extend:'Heron.base.Control',requires:['Heron.base.Control','Heron.Utils'],coord:0,xy_precision:0,constructor:function(a){console.log('Heron.base.MapCoordinate.constructor');a=this.checkConfig(a,!0);if(!isSet(a)){return}this.callParent([a]);this.xy_precision=checkOption(a.xy_precision,this.xy_precision);this.format=checkOption(a.format,this.format);this.setEventHandlers()},format:function(b,a){return b.toFixed(a)},getCoordinate:function(a){return a.coordinate[0]},onMouseMove:function(a){this.coord=this.getCoordinate(a);this.updateComponent()},setEventHandlers:function(){var a=this;this.interaction=new ol.interaction.Pointer({handleMoveEvent:function(b){a.onMouseMove(b)}});this.map.addInteraction(this.interaction);this.interaction.setActive(!0)},updateComponent:function(){if(!isSet(this.component)){return}if(!isSet(this.coord)){return}this.component.setHtml(this.format(this.coord,this.xy_precision))}});Ext.define('Heron.controls.MapCoordinateX',{extend:'Heron.base.MapCoordinate',requires:['Heron.base.MapCoordinate','Heron.Utils'],constructor:function(a){console.log('Heron.controls.MapCoordinateX.constructor');this.callParent([a])},format:function(b,a){return 'X: '+b.format(a)},getCoordinate:function(a){return a.coordinate[0]}});Ext.define('Heron.controls.MapCoordinateY',{extend:'Heron.base.MapCoordinate',requires:['Heron.base.MapCoordinate','Heron.Utils'],constructor:function(a){console.log('Heron.controls.MapCoordinateY.constructor');this.callParent([a])},format:function(b,a){return 'Y: '+b.format(a)},getCoordinate:function(a){return a.coordinate[1]}});Ext.define('Heron.controls.MapProjection',{extend:'Heron.base.Control',requires:['Heron.base.Control','Heron.Utils'],constructor:function(a){console.log('Heron.controls.MapProjection.constructor');a=this.checkConfig(a,!0);if(!isSet(a)){return}this.callParent([a]);this.format=checkOption(a.format,this.format)},updateComponent:function(){var a;if(!isSet(this.component)){return}if(this.map&&this.map.getView()&&this.map.getView().getProjection()){a=this.map.getView().getProjection().getCode()}else {a='--'}this.component.setHtml(this.format(a))}});Ext.define('Heron.controls.ZoomPreviousNext',{extend:'Heron.base.Control',requires:['Heron.base.Control','Heron.Utils'],buttonNext:null,buttonPrevious:null,extents:[],currIndex:-1,disableEvent:!1,zoomDuration:250,constructor:function(a){console.log('Heron.controls.ZoomPreviousNext.constructor');a=this.checkConfig(a,!0);if(!isSet(a)){return}this.callParent([a]);console.log('Heron.controls.ZoomPreviousNext.constructor 2');this.zoomDuration=checkOption(a.zoomDuration,this.zoomDuration);this.isActive=!0;console.log('Heron.controls.ZoomPreviousNext.constructor 3');this.setEventHandlers(!0)},onMoveEnd:function(){var a;console.log('Heron.controls.ZoomPreviousNext.onMoveEnd');if(this.disableEvent){this.disableEvent=!1;return}if(this.currIndex<this.extents.length-1){this.extents.length=this.currIndex+1}a=this.map.getView().calculateExtent(this.map.getSize());this.extents.push(a);this.currIndex+=1;this.updateButtons()},next:function(){var a;this.currIndex+=1;a=this.extents[this.currIndex];this.zoomToExtent(this.map,a);this.updateButtons()},previous:function(){var a;this.currIndex-=1;a=this.extents[this.currIndex];this.zoomToExtent(this.map,a);this.updateButtons()},setActive:function(a){},setButtonNext:function(a){this.buttonNext=a;this.buttonNext.disable()},setButtonPrevious:function(a){this.buttonPrevious=a;this.buttonPrevious.disable()},setEventHandlers:function(a){console.log('Heron.controls.ZoomPreviousNext.setEventHandlers');if(a===!0){this.map.on('moveend',this.onMoveEnd,this)}else {this.map.un('moveend',this.onMoveEnd,this)}},updateButtons:function(){if(this.extents.length<=1){this.buttonPrevious.disable();this.buttonNext.disable()}else {if(this.currIndex>0){this.buttonPrevious.enable()}else {this.buttonPrevious.disable()}if(this.currIndex<this.extents.length-1){this.buttonNext.enable()}else {this.buttonNext.disable()}}},zoomToExtent:function(b,a){this.disableEvent=!0;b.getView().fit(a,{duration:this.zoomDuration,easing:ol.easing.easeOut})}});Ext.define('Heron.widgets.MapBar',{singleton:!0,requires:['Heron.widgets.ToolButton','Heron.controls.MapCoordinateX','Heron.controls.MapCoordinateY','Heron.controls.MapProjection','Heron.controls.ZoomPreviousNext','Heron.Utils'],mapPanel:null,itemDefs:null,zoomPreviousNextControl:null,constructor:function(){console.log('Heron.widgets.MapBar.constructor')},build:function(f,m,a){var d=[];var j;var b;var e;var g;var c;var i;var k;var n;var q;var p;var r;var s;var o;var l;var t,h;console.log('Heron.widgets.MapBar.build');if(!isSet(f)){return}if(!isSet(a)){return}if(isEmpty(a.items)){return}if(!Ext.isArray(a.items)){return}if(!isSet(m)){return}a.dockPosition=checkOption(a.dockPosition,'top');a.padding=checkOption(a.padding,null);a.plugins=checkOption(a.plugins,null);a.responsiveConfig=checkOption(a.responsiveConfig,null);this.mapPanel=f;j=a.items;for(h=0,t=j.length;h<t;h++){b=j[h];if(isEmpty(b.type)){Heron.Utils.msgWarning(__("Invalid {0} config. Item with no 'type' found. Skipping.").format(a.type));continue}if(b.type==='-'||b.type==='tbseparator'){d.push('-');continue}if(b.type===' '||b.type==='tbspacer'){d.push(' ');continue}if(b.type==='->'||b.type==='tbfill'){d.push('->');continue}if(!isSet(this.itemDefs[b.type])){Heron.Utils.msgWarning(__("Invalid {0} config. Item type '{1}' not found. Skipping.").format(a.type,b.type));continue}if(isSet(b.create)){g=b.create}else {e=this.itemDefs[b.type];if(isSet(e.create)){g=e.create}}if(!isSet(g)){continue}if(b.type==='xcoord'){console.log('Heron.widgets.MapBar.build - type='+b.type)}q=checkOption(a.item.margin,null);p=checkOption(a.item.padding,null);r=checkOption(a.item.width,null);s=checkOption(a.item.cls,null);o=checkOption(a.item.iconCls,null);l=!1;c={map:f.map,scope:f,margin:q,padding:p,width:r,cls:s,iconCls:o,allowDepress:l};if(isSet(e.options)){c=Ext.apply(c,e.options)}if(isSet(b.options)){c=Ext.apply({},b.options,c)}if(!isSet(c.options)){c.options={}}c.options=Ext.apply({},m,c.options);k=checkOption(c.addSeparation,!1);if(k){n=a.item.separation;c.margin=Heron.Utils.strElementAdd(c.margin,3,n)}if(!isSet(c.glyph)){c.iconCls=null}i=g(f,c);if(isSet(i)){d.push(i)}}if(d.length===0){return}a.xtype='toolbar';a.dock=a.dockPosition;a.items=d;this.mapPanel.addDocked(a)},buildStatusbar:function(b,a){if(!isSet(this.itemDefs)){if(!this.initItemDefinitions(a)){return}}try{a.statusbar.type='statusbar';a.statusbar.dockPosition=checkOption(a.statusbar.dockPosition,'bottom');this.build(b,a,a.statusbar)}catch(c){Heron.Utils.msgError(__('Error while building the statusbar - ')+c)}},buildToolbar:function(b,a){if(!isSet(this.itemDefs)){if(!this.initItemDefinitions(a)){return}}try{a.toolbar.type='toolbar';a.toolbar.dockPosition=checkOption(a.toolbar.dockPosition,'top');this.build(b,a,a.toolbar)}catch(c){Heron.Utils.msgError(__('Error while building the toolbar - ')+c)}},createToolbarButton:function(b,a){a.map=b.map;return new Heron.widgets.ToolButton(a)},initItemDefinitions:function(b){var a=this;try{a.itemDefs={pan:{options:{xtype:'hr_ToolButton',id:'pan',iconCls:b.toolbar.item.iconCls,tooltip:__('Pan'),glyph:Heron.icons.pan,pressed:!0,toggleGroup:b.toolbar.toggleGroup,control:new ol.interaction.DragPan({kinetic:new ol.Kinetic(-0.01,0.1,200)})},create:function(c,a){c.map.addInteraction(a.control);return Ext.create(a)}},zoomin:{options:{xtype:'hr_ToolButton',id:'zoomin',tooltip:__('Zoom in'),glyph:Heron.icons.zoomIn,toggleGroup:b.toolbar.toggleGroup,control:new ol.interaction.DragZoom({condition:ol.events.condition.always})},create:function(c,a){c.map.addInteraction(a.control);return Ext.create(a)}},zoomout:{options:{xtype:'hr_ToolButton',id:'zoomout',tooltip:__('Zoom out'),glyph:Heron.icons.zoomOut,control:new ol.interaction.DragZoom({condition:ol.events.condition.always,out:!0}),toggleGroup:b.toolbar.toggleGroup},create:function(c,a){c.map.addInteraction(a.control);return Ext.create(a)}},zoomdefault:{options:{xtype:'hr_ToolButton',id:'zoomdefault',tooltip:__('Zoom to default extent'),glyph:Heron.icons.zoomDefault,handler:function(){a.mapPanel.zoomToDefault()}},create:function(c,a){return Ext.create(a)}},zoomprevious:{options:{xtype:'hr_ToolButton',id:'zoomprevious',tooltip:__('Zoom previous'),glyph:Heron.icons.zoomPrevious,handler:function(){a.zoomPreviousNextControl.previous()}},create:function(e,c){var d;if(!isSet(a.zoomPreviousNextControl)){a.zoomPreviousNextControl=Ext.create('Heron.controls.ZoomPreviousNext',c)}c.control=a.zoomPreviousNextControl;d=Ext.create(c);c.control.setButtonPrevious(d);return d}},zoomnext:{options:{xtype:'hr_ToolButton',id:'zoomnext',tooltip:__('Zoom next'),glyph:Heron.icons.zoomNext,handler:function(){a.zoomPreviousNextControl.next()}},create:function(e,c){var d;if(!isSet(a.zoomPreviousNextControl)){a.zoomPreviousNextControl=Ext.create('Heron.controls.ZoomPreviousNext',c)}c.control=a.zoomPreviousNextControl;d=Ext.create(c);a.zoomPreviousNextControl.setButtonNext(d);return d}},simplefeatureinfo:{options:{xtype:'hr_ToolButton',id:'simplefeatureinfo',tooltip:__('Get information'),glyph:Heron.icons.info,toggleGroup:b.toolbar.toggleGroup},create:function(c,a){a.control=Ext.create('Heron.controls.SimpleFeatureInfo',a);return Ext.create(a)}},any:{options:{tooltip:__('Anything is allowed here'),text:__('Any valid Toolbar.add() config goes here')},create:function(c,a){return a}},epsgpanel:{options:{xtype:'tbtext',id:'epsg'},create:function(e,d){var c,a;c=Ext.create('Heron.controls.MapProjection',d);a=Ext.create(d);c.bind(a);return a}},xcoord:{options:{xtype:'tbtext',id:'x-coord'},create:function(e,d){var c,a;console.log('Heron.widgets.MapBar.itemDefs xcoord.create() ');c=Ext.create('Heron.controls.MapCoordinateX',d);a=Ext.create(d);c.bind(a,!0);return a}},ycoord:{options:{xtype:'tbtext',id:'y-coord'},create:function(e,d){var c,a;c=Ext.create('Heron.controls.MapCoordinateY',d);a=Ext.create(d);c.bind(a,!0);return a}}};a.itemDefs.zoomvisible={options:a.itemDefs.zoomdefault.options,create:a.itemDefs.zoomdefault.create};return !0}catch(c){Heron.Utils.msgError(__('Error while creating toolbar/statusbar item definitions - ')+c);return !1}},setItemDef:function(b,c,a){a=a?a:{};this.defs[b].create=c;this.defs[b].options=a}});Ext.define('Heron.widgets.MapPanel',{extend:'Heron.base.Panel',alias:'widget.hr_MapPanel',requires:['Heron.debug.LogMapInfo','Heron.base.Panel','Heron.widgets.MapBar','Heron.Utils'],center:null,zoom:null,logMapInfoControl:null,useMapContext:!1,constructor:function(b){var i=this;var g;var d;var a;var e;var f;var c,h;console.log('Heron.widgets.MapPanel.constructor');b=this.checkConfig(b);if(!isSet(b)){return}a=b.options;a.settings=checkOption(a.settings,{});a.layers=checkOption(a.layers,[]);if(isSet(a.settings.center)&&isSet(a.settings.zoom)){d=null}else {if(isSet(a.settings.zoomExtent)){d=a.settings.zoomExtent;a.settings.center=ol.extent.getCenter(a.settings.zoomExtent);a.settings.zoom=0}}e=[];for(c=0,h=a.layers.length;c<h;c++){if(a.layers[c] instanceof Array){f=Heron.Utils.parseLayerDefArray(a.layers[c]);if(f){e.push(f)}}else {e.push(a.layers[c])}}a.layers=e;try{this.map=this.createMap(a)}catch(j){Heron.Utils.msgError(__('Error while creating the map: ')+j)}g=Ext.create('GeoExt.component.Map',{map:this.map});b.items=[g];i.callParent([b]);if(Heron.DEBUG){this.logMapInfoControl=Ext.create('Heron.debug.LogMapInfo',{map:this.map})}Heron.App.map=this.map;Heron.App.mapPanel=this;if(isSet(d)){Heron.OLUtils.zoomToExtent(this.map,d);this.center=this.map.getView().getCenter();this.zoom=this.map.getView().getZoom()}else {this.center=a.settings.center;this.zoom=a.settings.zoom}Heron.widgets.MapBar.buildToolbar(this,a);Heron.widgets.MapBar.buildStatusbar(this,a)},createMap:function(a){var b={};var c;if(isSet(a.settings.center)){b.center=a.settings.center}if(isSet(a.settings.constrainRotation)){b.constrainRotation=a.settings.constrainRotation}if(isSet(a.settings.enableRotation)){b.enableRotation=a.settings.enableRotation}if(isSet(a.settings.extent)){b.extent=a.settings.extent}if(isSet(a.settings.maxResolution)){b.maxResolution=a.settings.maxResolution}if(isSet(a.settings.minResolution)){b.minResolution=a.settings.minResolution}if(isSet(a.settings.maxZoom)){b.maxZoom=a.settings.maxZoom}if(isSet(a.settings.minZoom)){b.minZoom=a.settings.minZoom}if(isSet(a.settings.projection)){b.projection=a.settings.projection}if(isSet(a.settings.resolution)){b.resolution=a.settings.resolution}if(isSet(a.settings.resolutions)){b.resolutions=a.settings.resolutions}if(isSet(a.settings.rotation)){b.rotation=a.settings.rotation}if(isSet(a.settings.zoom)){b.zoom=a.settings.zoom}if(isSet(a.settings.zoomFactor)){b.zoomFactor=a.settings.zoomFactor}c=new ol.Map({layers:a.layers,controls:a.controls,interactions:a.interactions,keyboardEventTarget:a.keyboardEventTarget,view:new ol.View(b)});return c},zoomToDefault:function(){this.map.getView().setRotation(0);Heron.OLUtils.zoomToCenter(this.map,this.center,this.zoom)}});Ext.define('Heron.widgets.SimpleFeatureInfoPanel',{extend:'Heron.base.Panel',alias:'widget.hr_SimpleFeatureInfoPanel',requires:['Ext.LoadMask','Heron.base.Panel','Heron.Utils'],constructor:function(a){console.log('Heron.widgets.SimpleFeatureInfoPanel.constructor');a=this.checkConfig(a);if(!isSet(a)){return}this.callParent([a])},setInfo:function(a){this.setHtml(a)}});Ext.define('Heron.widgets.SimpleLayerTreePanel',{extend:'Ext.tree.Panel',alias:'widget.hr_SimpleLayerTreePanel',requires:['Ext.tree.Panel','Heron.base.Panel','Heron.Utils'],map:null,store:null,constructor:function(a){var c=this;var b;console.log('Heron.widgets.SimpleLayerTreePanel.constructor');a=Heron.base.Panel.prototype.checkConfig.call(c,a);if(!isSet(a)){return}b=new ol.layer.Group({visible:!1});a.store=Ext.create('GeoExt.data.store.LayersTree',{layerGroup:b});a.store.unbindGroupLayerCollectionEvents(b);this.store=a.store;c.callParent([a]);Heron.App.on('afterlayout',this.onAfterLayout,this)},onAfterLayout:function(d){var a=this;var b;var c;console.log('Heron.widgets.SimpleLayerTreePanel.onAfterLayout '+d);if(!isSet(a.map)){a.map=Heron.App.map}if(!isSet(a.map)){return}b=a.map.getLayerGroup();a.store.setLayerGroup(b);c=b.getLayers();Ext.each(c.getArray(),function(b){a.store.addLayerNode(b)},a.store,a.store.inverseLayerOrder);a.store.bindGroupLayerCollectionEvents(b);a.store.on({remove:a.store.handleRemove,noderemove:a.store.handleNodeRemove,nodeappend:a.store.handleNodeAppend,nodeinsert:a.store.handleNodeInsert,scope:a.store})}});Ext.define('Heron.debug.Test',{singleton:!0,requires:['Ext.window.Toast'],init:function(){var a=this;console.log('Heron.debug.Test.init');if(!isSet(Heron.options.map.toolbar.items)){Heron.options.map.toolbar.items=[]}if(Heron.options.map.toolbar.items.length>0){Heron.options.map.toolbar.items.push({type:' '})}Heron.options.map.toolbar.items.push({type:'any',options:{tooltip:__('Test'),text:__('Test'),handler:function(){a.test()}}})},test:function(){var a=this;a.test_ConsoleLog()},test_ConsoleLog:function(){console.log('test_ConsoleLog')}});Ext.define('Heron.OLUtils',{singleton:!0,zoomByDelta:function(f,e,b){b=b===undefined?250:b;var a;var c;var d;a=f.getView();if(!a){return}c=a.getResolution();if(c){d=a.constrainResolution(c,e);if(b>0){if(a.getAnimating()){a.cancelAnimations()}a.animate({resolution:d,duration:b,easing:ol.easing.easeOut})}else {a.setResolution(d)}}},zoomIn:function(b,a){a=a===undefined?250:a;this.zoomByDelta(b,1,a)},zoomOut:function(b,a){a=a===undefined?250:a;this.zoomByDelta(b,-1,a)},zoomToCenter:function(e,c,d,b){b=b===undefined?250:b;var a;a=e.getView();if(!a){return}if(b>0){if(a.getAnimating()){a.cancelAnimations()}a.animate({zoom:d,center:c,duration:b,easing:ol.easing.easeOut})}else {a.animate({zoom:d,center:c})}},zoomToExtent:function(d,a,c){c=c===undefined?250:c;var b=null;if(!a){return}if(Array.isArray(a)){b=a}else {if(isSet(a.minx)&&isSet(a.miny)&&isSet(a.maxx)&&isSet(a.maxx)){b=[Number(a.minx),Number(a.miny),Number(a.maxx),Number(a.maxy)]}}if(!b){return}d.getView().fit(b,{duration:c,easing:ol.easing.easeOut})}});Ext.define('Heron.Theme',{singleton:!0,requires:['Heron.Utils'],isInitialized:!1,toolbarStyle:null,toolbarHeight:0,getCurrentThemeName:function(){var d;var e;var f,b;var a;var c,g;a='';d=document.getElementsByTagName('link');for(c=0,g=d.length;c<g;c++){e=d[c];if(isSet(e.href)){f=e.href.replace('\\','/');b=f.afterLast('/');if(!isEmpty(b)){if(b.startsWith('theme-')&&b.endsWith('-all.css')){a=b.after('theme-');a=a.before('-all.css')}}}}return a},init:function(){var a;if(this.isInitialized){return}a=this.getCurrentThemeName();console.log('Heron.Theme.init themeName='+a);if(a==='crisp'){this.toolbarHeight=36;this.toolbarStyle='background: #F5F5F5;'}else {if(a==='gray'){this.toolbarHeight=27;this.toolbarStyle='background-color: #D7D2D2;background-image:-webkit-linear-gradient(top,#F0F0F0,#D7D7D7);'}else {if(a==='neptune'){this.toolbarHeight=36;this.toolbarStyle='background:#157FCC;'}else {if(a==='triton'){this.toolbarHeight=45;this.toolbarStyle='background:#5FA2DD;'}else {this.toolbarHeight=Heron.options.map.toolbar.height;this.toolbarStyle=Heron.options.map.toolbar.style}}}}this.isInitialized=!0},updateToolbarLayoutAndStyle:function(){this.init();Heron.options.map.toolbar.height=this.toolbarHeight;Heron.options.map.toolbar.style=this.toolbarStyle}});Ext.define('Heron.Application',{extend:'Ext.Component',requires:['Heron.widgets.HtmlPanel','Heron.widgets.MapPanel','Heron.widgets.SimpleFeatureInfoPanel','Heron.widgets.SimpleLayerTreePanel','Heron.debug.Test','Heron.OLUtils','Heron.Theme','Heron.Utils'],mapContext:null,map:null,mapPanel:null,launch:function(a,b){console.log('Heron.Application.launch');consoleLog('Heron Version: '+a.fullVersion);if(Heron.TEST){Heron.debug.Test.init()}if(isSet(a.launch.afterStart)){a.launch.afterStart(this)}Heron.Theme.updateToolbarLayoutAndStyle();if(!isSet(b.layout)){Heron.Utils.msgConfigError(null,__('No Heron.options.layout specified in the config!'));return}if(!isEmpty(b.mapContext.url)){this.loadMapContext(b.mapContext)}else {this.createLayout(b.layout)}this.fireEvent('afterlayout',this);if(isSet(a.launch.beforeEnd)){a.launch.beforeEnd(this)}},onAfterLayout:function(){console.log('Heron.Application.onAfterLayout')},createLayout:function(a){var c=this;var b;console.log('Heron.Application.createLayout');try{if(isSet(a.renderTo)||a.xtype==='window'){console.log('Heron.Application.createLayout - creating Heron Layout');c.topComponent=Ext.create(a);if(isSet(a.renderTo)){b=Ext.get(a.renderTo);if(b){b.on('resize',function(){c.topComponent.updateLayout()})}}}else {console.log('Heron.Application.createLayout - creating Viewport');c.topComponent=new Ext.Viewport({id:'hr_MainWindow',layout:'fit',hideBorders:!0,items:[a]})}if(isSet(this.topComponent)&&!this.topComponent.isVisible()){this.topComponent.show()}}catch(d){Heron.Utils.msgError(__('Error while creating the app layout - ')+d)}},loadMapContext:function(a){console.log(a);Heron.Utils.msgBoxInfo('Not yet implemented.')}});Ext.Loader.setConfig({disableCaching:Heron.disableCaching,enabled:!0,paths:{'GeoExt':Heron.app.paths.geoext,'Heron':Heron.app.paths.src}});Ext.application({requires:['Heron.Application'],launch:function(){Heron.App=Ext.create('Heron.Application');Heron.App.launch(Heron.app,Heron.options)}});Ext.define('Heron.controls.SimpleFeatureInfo',{extend:'Heron.base.Control',requires:['Heron.base.Control','Heron.Utils'],infoPanel:null,infoPanelId:null,constructor:function(a){console.log('Heron.controls.SimpleFeatureInfo.constructor');a=this.checkConfig(a,!0);if(!isSet(a)){return}this.callParent([a]);this.infoPanelId=checkOption(a.infoPanelId,this.infoPanelId)},setEventHandlers:function(a){console.log('Heron.controls.SimpleFeatureInfo.setEventHandlers');if(a===!0){this.map.on('singleclick',this.onMouseClick,this);this.map.on('pointermove',this.onMouseMove,this)}else {this.map.un('singleclick',this.onMouseClick,this);this.map.un('pointermove',this.onMouseMove,this)}},msgFeatureInfo:function(b){var a;a='<h2>Feature Info</h2>';Heron.Utils.msgInfo(a+b)},onFeatureInfo:function(d){var a;var b;var c;console.log('Heron.controls.SimpleFeatureInfo.onFeatureInfo');a=d.currentTarget.responseText;b='#666';c='#fff';a=a.replace('background:#eee;','background:'+b+';color:'+c+';');if(!isSet(this.infoPanel)){if(!isEmpty(this.infoPanelId)){this.infoPanel=Ext.getCmp(this.infoPanelId);if(isSet(this.infoPanel)){this.infoPanel.setInfo(a)}else {this.msgFeatureInfo(a)}}else {this.msgFeatureInfo(a)}}else {this.infoPanel.setInfo(a)}},onMouseClick:function(k){var l=this;var i;var h;var c;var f;var g;var e=null;var b;var d;var a,j;console.log('Heron.controls.SimpleFeatureInfo.onMouseClick');i=this.map.getView().getResolution();h=this.map.getView().getProjection();c=this.map.getLayerGroup().getLayers().getArray();for(a=0,j=c.length;a<j;a++){f=c[a].getSource();if(f instanceof ol.source.ImageWMS&&c[a].getVisible()===!0){e=f;break}}if(e){g='text/html';d=e.getGetFeatureInfoUrl(k.coordinate,i,h,{'INFO_FORMAT':g});if(!isEmpty(d)){b=new XMLHttpRequest();b.open('GET',d);b.addEventListener('load',function(a){l.onFeatureInfo(a)});b.send(d)}}},onMouseMove:function(c){var b;var a;if(c.dragging){return}b=this.map.getEventPixel(c.originalEvent);try{a=this.map.forEachLayerAtPixel(b,function(){return !0});this.map.getTargetElement().style.cursor=a?'pointer':''}catch(d){}}});